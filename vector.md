# ベクトル

下にベクトル
###作成


```
NumericVector v(3); // c(0,0,0)と同義
NumericVector v = NumericVector::create(1,2,3); //c(1,2,3) 
NumericVector v = NumericVector::create(Named("x") = 1 , _["y"] = 2); //c(x=1, y=2) 名前付きベクター
NumericVector v = {1,2,3}; //c(1,2,3)、C++11イニシャライザリストを使った例
```



###要素へのアクセス

Rと同様に、Rcpp数値ベクター・文字列ベクター・論理ベクターを使って、ベクター要素のサブセットにアクセスして、値を参照・代入することができる。

```
v[0]       //要素番号（数値ベクター）でアクセス
v["X"]     //要素の名前（文字列ベクター）でアクセス
v[L]       //論理値ベクター(L)でアクセス
```

**重要**：
Rcppでは、ベクターや行列の要素のインデックスはC++のスタイルに従っているため０から始まるので注意すること。


```
//例：ベクターvの総和を計算する
double sum=0;
for(int i=0; i<v.length(); ++i){
    sum += v[i];
}
```

**重要**：ベクターや行列同士で代入する際には注意が必要である。単純に `v2 = v1;`で代入すると v1 の値が v2 にコピーされるのではなく、v1 と v2 は同じオブジェクトに対する別名となるので、v1の値を変更するとv2の値も変更される。

```
NumericVector v1(1,2,3);
NumericVector v2(v1);
//NumericVector v2 = v1; と同義

v1[0] = 100;
Rcout << v1 << endl; //100 2 3
Rcout << v2 << endl; //100 2 3
```
値をコピーしたい場合には `clone()` 関数を使用する。そうすると v1 の値を変更しても、v2 の値は変更されない。

```
NumericVector v1(1,2,3);
NumericVector v2 = clone(v1);
v1[0] = 100;
Rcout << v1 << endl; //100 2 3
Rcout << v2 << endl; //1 2 3
```

C++に詳しい人のために説明すると、Rcppのデータ型は内部にオブジェクトの値そのものではなく、オブジェクトへのポインタを保持している。そのため、`v2=v1` とするとポインターの値がコピーされてしまう）
